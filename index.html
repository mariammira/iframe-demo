<html>
  <head> 
  </head>

  <body>
   <h1> Hello world</h1>
    <script>
const channel = new BroadcastChannel("my-iframe-channel");
function sendMessage(msg) {
  channel.postMessage({ type: "message", data: msg.data });
}
channel.onmessage = (event) => {
  sendDataToAllClients(event.data)
};
      const clients = new Set();
      window.addEventListener('message' , event => {
        if(event.data.type === 'registartion' ){
           clients.add(event.source);
           return;
        }
         if(event){ //client !== event.source){
             sendMessage(event);
             sendDataToAllClients(event.data)

         }
      });
      function sendDataToAllClients(data){
        for(const client of clients){
            client.postMessage(data, '*');
        }
      }
    </script>
  </body>
</html>
